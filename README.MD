# Sistema de Control de Dispositivos y Maquinaria (SCDM) - Red de Casinos

## üìå Visi√≥n General
Este sistema ha sido dise√±ado para la gesti√≥n y control administrativo de m√°quinas y dispositivos en una red de **17 sucursales de casinos**. La plataforma permite supervisar el estado de los equipos, gestionar bajas, reparaciones y movimientos de inventario de forma manual por parte del personal autorizado.

**Nota importante:** Por seguridad, el sistema NO tiene conexi√≥n directa en tiempo real con las m√°quinas; los cambios de estado son responsabilidad de los usuarios finales.

---

## üõ†Ô∏è Stack Tecnol√≥gico
Para garantizar la estabilidad y el control que requiere la direcci√≥n de sistemas, se utilizan las siguientes tecnolog√≠as:

- **Backend:** Python 3.14 + Django & Django REST Framework (DRF).
- **Base de Datos:** MySQL (Conexi√≥n mediante `PyMySQL` debido a compatibilidad de entorno).
- **Frontend:** Vue.js 3 + PrimeVue (Basado en el tema **Sakai**).
- **Gesti√≥n de Estado:** Pinia.
- **Consumo de API:** Axios.

---

## üèóÔ∏è Arquitectura y Reglas de Negocio

### 1. Jerarqu√≠a de Permisos (Roles)
El control de acceso se basa en un nivel jer√°rquico num√©rico:
- **Rango:** 0 a 200 (siendo 200 el nivel m√°ximo de administraci√≥n).
- Toda validaci√≥n de API y visibilidad en el frontend debe contrastarse contra este valor num√©rico.

### 2. Gesti√≥n de Sucursales
El sistema opera sobre 17 ubicaciones f√≠sicas fijas. Cada sucursal cuenta con 3 usuarios operativos planeados. Se deben registrar horarios de apertura/cierre y correos de contacto para gerencia y soporte t√©cnico en cada sede.

### 3. Seguridad y Sesi√≥n √önica
- **Sesi√≥n Unitaria:** Se permite estrictamente una sola sesi√≥n activa por usuario.
- **Control de Tokens:** Al iniciar sesi√≥n en un nuevo dispositivo, cualquier sesi√≥n previa en otros navegadores o dispositivos debe ser invalidada autom√°ticamente mediante la comparaci√≥n del `session_token` en la base de datos.
- **Identidad:** No se utiliza el sistema de usuarios nativo de Django; se emplea una tabla personalizada `UsuarioPropio` vinculada a Roles y Sucursales.

### 4. Est√°ndar de Auditor√≠a (Modelo Base)
Todas las entidades de la base de datos deben heredar de un `ModeloBase` abstracto que incluya:
- **Borrado L√≥gico:** Uso del campo `esta_activo` (boolean) en lugar de eliminar registros f√≠sicos.
- **Trazabilidad:** Registro autom√°tico de `creado_en`, `modificado_en`, `creado_por` y `modificado_por`.

---

## üóÑÔ∏è Estructura de Base de Datos (Principales)



- **Roles:** ID, nombre, descripci√≥n, nivel (0-200).
- **Sucursales:** ID, nombre, c√≥digo interno, direcci√≥n, tel√©fonos, correos (gerente/t√©cnico), horarios.
- **Usuarios:** Username, password (hash), email, nombre completo, fecha de nacimiento, rol (FK), sucursal (FK), √∫ltimo token.
- **Logs:** Auditor√≠a detallada de acciones por usuario y m√≥dulo.

---

## üöÄ Gu√≠a de Desarrollo para IA (Gemini/Copilot)
Cuando trabajes en este proyecto, sigue estas directrices estrictas:
1. **Frontend:** Usa exclusivamente componentes de **PrimeVue** siguiendo la est√©tica de **Sakai**.
2. **Backend:** Prioriza la seguridad de los endpoints verificando siempre el nivel de jerarqu√≠a (0-200) del usuario que realiza la petici√≥n.
3. **Conectividad:** La API debe estar configurada para manejar CORS, ya que el Frontend y el Backend corren de forma desacoplada.